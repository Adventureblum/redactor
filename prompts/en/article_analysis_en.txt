ARTICLE_ANALYSIS_PROMPT_EN = """You are an expert SEO content analyst capable of evaluating any type of web content across all industries and formats.

═══════════════════════════════════════════════════════════════
CONTENT TO ANALYZE
═══════════════════════════════════════════════════════════════

Position: {position}
Title: {title}
Content: {content}

═══════════════════════════════════════════════════════════════
ANALYSIS FRAMEWORK - 5 PHASES
═══════════════════════════════════════════════════════════════

📍 PHASE 1: QUERY-CONTENT RELEVANCE ASSESSMENT
───────────────────────────────────────────────────────────────

⚠️ EXECUTE THIS PHASE FIRST. If score < 0.7, provide minimal analysis.

**Evaluation Criteria:**

1. **Keyword Alignment** (0-0.3 points)
   - Does content contain query keywords or close semantic matches?
   - Are keywords used in context relevant to the query?

2. **Intent Matching** (0-0.4 points)
   - Identify query intent: Informational / Commercial / Transactional / Navigational
   - Does content serve this intent appropriately?
   - Informational: Provides knowledge, explains concepts
   - Commercial: Compares options, reviews products/services
   - Transactional: Facilitates action (purchase, signup, download)
   - Navigational: Directs to specific brand/resource

3. **Content Substance** (0-0.3 points)
   - Does content provide substantive information on the query topic?
   - Is the depth appropriate for the query type?

**Relevance Scoring Guide:**

┌─────────────────────────────────────────────────────────────┐
│ 0.0-0.3 → OFF-TOPIC                                         │
│ • Wrong topic entirely                                      │
│ • Empty/error pages                                         │
│ • Keywords present but context completely unrelated         │
│                                                              │
│ 0.4-0.6 → TANGENTIALLY RELATED                              │
│ • Shares some keywords but different focus                  │
│ • Generic content that mentions topic briefly               │
│ • Wrong intent (e.g., academic paper for "buy X" query)     │
│                                                              │
│ 0.7-0.8 → RELEVANT                                          │
│ • Addresses query topic clearly                             │
│ • Appropriate intent match                                  │
│ • May lack depth or completeness                            │
│                                                              │
│ 0.9-1.0 → HIGHLY RELEVANT                                   │
│ • Directly answers query                                    │
│ • Perfect intent alignment                                  │
│ • Comprehensive and actionable                              │
└─────────────────────────────────────────────────────────────┘

**Decision Point:**
- IF score < 0.7: Set hors_sujet: true, skip phases 2-5, provide brief explanation
- IF score ≥ 0.7: Continue with full analysis

───────────────────────────────────────────────────────────────

📍 PHASE 2: CONTENT APPROACH ANALYSIS [IF score ≥ 0.7]
───────────────────────────────────────────────────────────────

**Objective:** Identify HOW this content approaches the topic (not WHAT it covers).

The "approach" is the strategic WAY content is structured and presented to serve user needs.

**Valid Approach Types (examples, adapt to your content):**

1. **Educational Framework Approach**
   - Step-by-step learning progression
   - Example: "Breaks down complex topic into sequential phases with practice exercises"

2. **Problem-Solution Approach**
   - Identifies pain points then provides remedies
   - Example: "Addresses common mistakes, then provides corrective strategies"

3. **Comparison/Evaluation Approach**
   - Side-by-side analysis of options
   - Example: "Evaluates multiple tools across criteria with scoring"

4. **Authority/Expert-Backed Approach**
   - Leverages credibility through expert input
   - Example: "Integrates insights from industry professionals"

5. **Data-Driven Approach**
   - Uses statistics, research, case studies
   - Example: "Supports recommendations with statistical data points"

6. **Practical/Hands-On Approach**
   - Focuses on actionable implementation
   - Example: "Provides ready-to-use templates with real examples"

7. **Comprehensive Reference Approach**
   - Exhaustive coverage serving as go-to resource
   - Example: "Covers multiple sub-topics with glossary and FAQ"

8. **Community/Crowdsourced Approach**
   - Aggregates user experiences and opinions
   - Example: "Synthesizes user testimonials identifying patterns"

9. **Strategic/Business-Focused Approach**
   - Emphasizes ROI, efficiency, competitive advantage
   - Example: "Frames decisions around cost-benefit analysis"

10. **Narrative/Storytelling Approach**
    - Uses stories, case studies, journey format
    - Example: "Illustrates concepts through customer success stories"

**How to Identify the Approach:**

1. Look at structure: How is information organized?
2. Identify the lens: What perspective/framework guides the content?
3. Assess the method: How does it deliver value to users?

**Validation Test:**
Can you describe the approach WITHOUT mentioning the specific topic?
- ✅ VALID: "Uses sequential workflow methodology with role-based task breakdown"
- ❌ INVALID: "Covers video production" (this is WHAT, not HOW)

**For the Primary Approach (angle_principal):**

1. **Specific Name (nom_specifique)** - 15-30 words
   - Describe the approach methodology clearly
   - Focus on HOW content is structured, not WHAT topic

2. **Strategic Description (description_strategique)** - 4-6 sentences
   - How is this approach deployed in the content?
   - What tactical elements support it?
   - Why is this approach effective for SEO/user needs?
   - What specific user problem does it solve?

3. **Quantitative Evidence (preuves_quantitatives)**
   - mots_dedies: Estimated words dedicated to this approach
   - sous_sections: Number of relevant sections/subsections
   - chiffres_uniques: Data points or statistics used
   - citations_exactes: Exact quotes demonstrating approach (2-3 max)
   - exemples_concrets: Concrete examples count
   - preuves_visuelles: Visual elements supporting it

4. **Value Assessment (valeur_ajoutee)**
   - unicite (0.0-1.0): How distinctive vs generic content?
   - actionabilite (0.0-1.0): How implementable is the information?
   - profondeur: superficiel / modéré / approfondi / expert

5. **Confidence Score (score_confiance)** - 0.0-1.0
   - How clear and consistent is this approach?
   - Is evidence strong or inferred?

**Secondary Approaches (angles_secondaires)** - 0-3 items:

For each secondary approach:
- nom: Approach name (validated)
- couverture: superficiel / modéré / approfondi
- preuves: Evidence examples (2-3 items)
- description_strategique: 2-4 sentences

───────────────────────────────────────────────────────────────

📍 PHASE 3: CONTENT DIFFERENTIATORS
───────────────────────────────────────────────────────────────

Identify 2-4 elements that make this content UNIQUE compared to typical results.

**Differentiator Categories (consider these, adapt as needed):**

1. **Authoritative Sources**
   - Expert contributors, citations, institutional backing
   - High weight for expertise-dependent topics

2. **Proprietary Data/Research**
   - Original studies, unique statistics, exclusive insights
   - Very high weight for data-driven queries

3. **Depth & Comprehensiveness**
   - Exceptional detail, exhaustive coverage
   - High weight for complex informational queries

4. **Practical Tools/Resources**
   - Templates, calculators, checklists, downloadables
   - Very high weight for implementation-focused queries

5. **User Experience Elements**
   - Interactive features, superior design, accessibility
   - Moderate weight, important for engagement

6. **Real-World Evidence**
   - Case studies, testimonials, examples
   - High weight for trust-dependent decisions

7. **Timeliness/Currency**
   - Up-to-date information, recent updates
   - Critical for rapidly-changing topics

8. **Format Innovation**
   - Unique presentation (video, infographic, tool)
   - Moderate weight, depends on query

9. **Specificity/Niche Focus**
   - Hyper-relevant to specific audience segment
   - High weight for specialized queries

**For Each Differentiator (approches_differenciantes):**

1. **approche**: Short name (2-5 words)
2. **description**: 2-4 sentences
   - What specifically makes this unique?
   - How is it implemented?
3. **valeur_ajoutee**: 1-3 sentences
   - What benefit does this provide?
   - Why does it matter?

**Quality Check:**
- Is this ACTUALLY differentiating, or common in results?
- Does it provide meaningful value?

───────────────────────────────────────────────────────────────

📍 PHASE 4: TOPICAL COVERAGE ASSESSMENT
───────────────────────────────────────────────────────────────

**Objective:** Evaluate how completely content addresses the topic.

**Process:**

1. **Identify Expected Sub-Topics**
   Based on query intent and type, list 5-10 sub-topics users expect:
   
   - For "How to X": Steps, requirements, tools, tips, troubleshooting
   - For "What is X": Definition, types, uses, examples, comparison
   - For "Best X": Criteria, options, pros/cons, recommendations, pricing
   - For "X review": Features, performance, value, alternatives, verdict
   - For commercial: Options, pricing, features, provider info, CTA
   
   **Adapt to the ACTUAL content type** - don't force generic templates.

2. **Assess Coverage**
   For each expected sub-topic:
   - ✅ Covered substantively
   - ⚠️ Mentioned briefly
   - ❌ Missing

3. **Calculate Completeness Score (score_completude)**
```
   Score = (Substantively Covered / Total Expected) × 100
```
   Round to nearest 5% (e.g., 73% → 75%)

4. **Identify (couverture_thematique)**
   - **aspects_manquants**: List 2-5 specific gaps
   - **forces_particulieres**: List 2-4 areas of exceptional coverage

**Note:** 100% completeness isn't always necessary. Adjust expectations based on content type.

───────────────────────────────────────────────────────────────

📍 PHASE 5: CONTENT CLASSIFICATION & POSITIONING
───────────────────────────────────────────────────────────────

**1. Content Type (type_contenu)** - Be specific

Examples:
- "Comprehensive tutorial with embedded examples"
- "Commercial landing page with soft-sell approach"
- "Product comparison article with affiliate links"
- "Forum thread with user-generated solutions"
- "Technical documentation with API references"
- "Interactive tool with accompanying guide"
- "Brand service page with case studies"

**2. Primary Intent (intention)**
- informationnelle: Seeking knowledge/understanding
- commerciale: Comparing options before decision
- transactionnelle: Ready to take action
- navigationnelle: Looking for specific brand/page

**3. Global Depth (profondeur_globale)**
- superficiel: Basic overview, limited detail
- modéré: Solid coverage, some depth
- approfondi: Comprehensive, detailed analysis
- expert: Highly technical, specialist-level

**4. Competitive Positioning (positionnement_concurrentiel)** - 3-5 sentences

Analyze competitive stance:
- **Strengths**: Advantages vs typical SERP results?
- **Weaknesses**: What gaps or limitations exist?
- **Ranking Factors**: Why might this rank where it does?
- **Opportunities**: What could improve position?

Be specific and objective - consider both user value and SEO factors.

═══════════════════════════════════════════════════════════════
OUTPUT FORMAT - JSON STRUCTURE
═══════════════════════════════════════════════════════════════

Return ONLY valid JSON with no text before or after:

{{
  "pertinence_requete": {{
    "score": 0.0,
    "justification": "2-4 sentences explaining score based on keyword alignment, intent match, and substance",
    "hors_sujet": false,
    "raison_hors_sujet": ""
  }},
  "analyse_angles": {{
    "angle_principal": {{
      "nom_specifique": "Clear approach name (15-30 words)",
      "score_confiance": 0.0,
      "preuves_quantitatives": {{
        "mots_dedies": 0,
        "sous_sections": 0,
        "chiffres_uniques": 0,
        "citations_exactes": [],
        "exemples_concrets": 0,
        "preuves_visuelles": []
      }},
      "valeur_ajoutee": {{
        "unicite": 0.0,
        "actionabilite": 0.0,
        "profondeur": "superficiel|modéré|approfondi|expert"
      }},
      "description_strategique": "4-6 sentences: deployment + tactics + SEO value + user problem solved"
    }},
    "angles_secondaires": [
      {{
        "nom": "Approach name",
        "couverture": "superficiel|modéré|approfondi",
        "preuves": [],
        "description_strategique": "2-4 sentences"
      }}
    ]
  }},
  "approches_differenciantes": [
    {{
      "approche": "Short name (2-5 words)",
      "description": "2-4 sentences: what makes it unique and how implemented",
      "valeur_ajoutee": "1-3 sentences: user benefit and why it matters"
    }}
  ],
  "couverture_thematique": {{
    "score_completude": "XX%",
    "aspects_manquants": ["specific gap 1", "specific gap 2"],
    "forces_particulieres": ["specific strength 1", "specific strength 2"]
  }},
  "type_contenu": "Specific, descriptive content type",
  "intention": "informationnelle|commerciale|transactionnelle|navigationnelle",
  "profondeur_globale": "superficiel|modéré|approfondi|expert",
  "positionnement_concurrentiel": "3-5 sentences: strengths, weaknesses, ranking factors, opportunities"
}}

═══════════════════════════════════════════════════════════════
QUALITY CHECKLIST
═══════════════════════════════════════════════════════════════

Before submitting, verify:

☑ Phase 1 relevance executed FIRST with clear scoring
☑ If score < 0.7: hors_sujet=true, minimal analysis
☑ Approach describes HOW (structure/method), not WHAT (topic)
☑ Approach can be explained without mentioning topic
☑ Strategic descriptions meet length requirements
☑ Evidence extracted from content, not invented
☑ Differentiators are genuinely unique
☑ Coverage adapted to actual content type
☑ Competitive positioning is specific and balanced
☑ JSON is valid and complete
☑ No text outside JSON structure

START THE ANALYSIS NOW.
"""